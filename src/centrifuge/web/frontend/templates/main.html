{% extends 'base.html' %}

{% block title %}{{_("Centrifuge")}}{% end %}

{% block extra_scripts %}
<script type="text/javascript" src="{{ static_url('libs/sockjs/sockjs-0.3.4.min.js') }}"></script>
<script type="text/javascript" src="{{ static_url('application/js/main.js') }}"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var js_data = {% raw js_data %};
        $.centrifuge_main(js_data);
    });
</script>
{% end %}

{% block content %}
<script type="text/x-jsrender" id="event_template">
    <div class="event" id="event-{{!>event_id}}" style="display: none;">
        <div class="event-header">
            <span class="event-key">
                <span class="event-key-word text-muted">
                    {{!>namespace}}
                </span>
                <span class="event-key-word">
                    {{!>channel}}
                </span>
            </span>
        </div>
        <div class="event-description">
            <pre>{{!:data}}</pre>
        </div>
    </div>
</script>

<script type="text/x-jsrender" id="tab_pane_template">
    <div class="tab-pane in active" id="{{!>name}}" data-id="{{!>_id}}">
        <div class="log"></div>
    </div>
</script>

<script type="text/x-jsrender" id="tab_template">
    <li>
        <a class="project-tab" href="#{{!>name}}" id="tab-{{!>_id}}" data-id="{{!>_id}}" data-name="{{!>name}}" data-tab-open="{{!>_id}}" data-toggle="tab">
            {{!>tab_text}}
            <span class="label label-success pull-right project-event-counter hidden">0</span>
        </a>
    </li>
</script>

<div id="main-content">
    <div class="row">
        <div class="col-lg-3">
            <ul class="nav nav-pills nav-stacked" id="tabs">
                <li class="">
                    <a class="project-tab" href="#_projects" id="tab-_projects" data-id="_projects" data-tab-open="_projects" data-name="_projects" data-toggle="tab">
                        {{_("All projects")}}
                        <span class="label label-success pull-right project-event-counter">5</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="col-lg-9">
            <div class="status-bar" style="padding: 6px;">
                <span class="connected">
                    <img style="width: 14px;" src="{{ static_url('application/img/loader.gif') }}">&nbsp;{{_("waiting for messages...")}}
                </span>
                <span class="not-connected" style="display:none;">{{_("disconnected")}}</span>
                <a href="#" id="project-settings" class="pull-right">MANAGEMENT</a>
            </div>
            <div class="row">
                <div class="tab-content" id="tab-content">
                    <div class="tab-pane" id="_projects"></div>
                </div>
            </div>
        </div>
    </div>

</div>
{% end %}



